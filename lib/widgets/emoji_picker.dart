import 'package:flutter/material.dart';

/// è¡¨æƒ…é€‰æ‹©å™¨ç»„ä»¶
class EmojiPicker extends StatefulWidget {
  final Function(String emoji) onEmojiSelected;

  const EmojiPicker({super.key, required this.onEmojiSelected});

  @override
  State<EmojiPicker> createState() => _EmojiPickerState();
}

class _EmojiPickerState extends State<EmojiPicker> {
  // è¡¨æƒ…åˆ†ç±»
  int _selectedCategory = 0;

  // è¡¨æƒ…æ•°æ®
  final List<Map<String, dynamic>> _categories = [
    {
      'icon': Icons.emoji_emotions,
      'title': 'è¡¨æƒ…',
      'emojis': [
        'ğŸ˜€',
        'ğŸ˜ƒ',
        'ğŸ˜„',
        'ğŸ˜',
        'ğŸ˜†',
        'ğŸ˜…',
        'ğŸ˜‚',
        'ğŸ¤£',
        'ğŸ˜Š',
        'ğŸ˜‡',
        'ğŸ™‚',
        'ğŸ™ƒ',
        'ğŸ˜‰',
        'ğŸ˜Œ',
        'ğŸ˜',
        'ğŸ¥°',
        'ğŸ˜˜',
        'ğŸ˜—',
        'ğŸ˜™',
        'ğŸ˜š',
        'ğŸ˜‹',
        'ğŸ˜›',
        'ğŸ˜',
        'ğŸ˜œ',
        'ğŸ¤ª',
        'ğŸ¤¨',
        'ğŸ§',
        'ğŸ¤“',
        'ğŸ˜',
        'ğŸ¤©',
        'ğŸ¥³',
        'ğŸ˜',
        'ğŸ˜’',
        'ğŸ˜',
        'ğŸ˜”',
        'ğŸ˜Ÿ',
        'ğŸ˜•',
        'ğŸ™',
        'â˜¹ï¸',
        'ğŸ˜£',
        'ğŸ˜–',
        'ğŸ˜«',
        'ğŸ˜©',
        'ğŸ¥º',
        'ğŸ˜¢',
        'ğŸ˜­',
        'ğŸ˜¤',
        'ğŸ˜ ',
        'ğŸ˜¡',
        'ğŸ¤¬',
        'ğŸ¤¯',
        'ğŸ˜³',
        'ğŸ¥µ',
        'ğŸ¥¶',
        'ğŸ˜±',
        'ğŸ˜¨',
        'ğŸ˜°',
        'ğŸ˜¥',
        'ğŸ˜“',
        'ğŸ¤—',
        'ğŸ¤”',
        'ğŸ¤­',
        'ğŸ¤«',
        'ğŸ¤¥',
        'ğŸ˜¶',
        'ğŸ˜',
        'ğŸ˜‘',
        'ğŸ˜¬',
        'ğŸ™„',
        'ğŸ˜¯',
        'ğŸ˜¦',
        'ğŸ˜§',
        'ğŸ˜®',
        'ğŸ˜²',
        'ğŸ¥±',
        'ğŸ˜´',
        'ğŸ¤¤',
        'ğŸ˜ª',
        'ğŸ˜µ',
        'ğŸ¤',
        'ğŸ¥´',
        'ğŸ¤¢',
        'ğŸ¤®',
        'ğŸ¤§',
        'ğŸ˜·',
        'ğŸ¤’',
        'ğŸ¤•',
        'ğŸ¤‘',
        'ğŸ¤ ',
        'ğŸ˜ˆ',
        'ğŸ‘¿',
        'ğŸ‘¹',
        'ğŸ‘º',
        'ğŸ¤¡',
        'ğŸ’©',
        'ğŸ‘»',
        'ğŸ’€',
        'â˜ ï¸',
        'ğŸ‘½',
        'ğŸ‘¾',
        'ğŸ¤–',
        'ğŸƒ',
        'ğŸ˜º',
        'ğŸ˜¸',
      ],
    },
    {
      'icon': Icons.emoji_nature,
      'title': 'åŠ¨ç‰©ä¸è‡ªç„¶',
      'emojis': [
        'ğŸ¶',
        'ğŸ±',
        'ğŸ­',
        'ğŸ¹',
        'ğŸ°',
        'ğŸ¦Š',
        'ğŸ»',
        'ğŸ¼',
        'ğŸ»â€â„ï¸',
        'ğŸ¨',
        'ğŸ¯',
        'ğŸ¦',
        'ğŸ®',
        'ğŸ·',
        'ğŸ½',
        'ğŸ¸',
        'ğŸµ',
        'ğŸ™ˆ',
        'ğŸ™‰',
        'ğŸ™Š',
        'ğŸ’',
        'ğŸ”',
        'ğŸ§',
        'ğŸ¦',
        'ğŸ¤',
        'ğŸ£',
        'ğŸ¥',
        'ğŸ¦†',
        'ğŸ¦…',
        'ğŸ¦‰',
        'ğŸ¦‡',
        'ğŸº',
        'ğŸ—',
        'ğŸ´',
        'ğŸ¦„',
        'ğŸ',
        'ğŸª±',
        'ğŸ›',
        'ğŸ¦‹',
        'ğŸŒ',
        'ğŸ',
        'ğŸœ',
        'ğŸª°',
        'ğŸª²',
        'ğŸª³',
        'ğŸ¦Ÿ',
        'ğŸ¦—',
        'ğŸ•·',
        'ğŸ•¸',
        'ğŸ¦‚',
        'ğŸ¢',
        'ğŸ',
        'ğŸ¦',
        'ğŸ¦–',
        'ğŸ¦•',
        'ğŸ™',
        'ğŸ¦‘',
        'ğŸ¦',
        'ğŸ¦',
        'ğŸ¦€',
        'ğŸ¡',
        'ğŸ ',
        'ğŸŸ',
        'ğŸ¬',
        'ğŸ³',
        'ğŸ‹',
        'ğŸ¦ˆ',
        'ğŸŠ',
        'ğŸ…',
        'ğŸ†',
        'ğŸ¦“',
        'ğŸ¦',
        'ğŸ¦§',
        'ğŸ¦£',
        'ğŸ˜',
        'ğŸ¦›',
        'ğŸ¦',
        'ğŸª',
        'ğŸ«',
        'ğŸ¦’',
        'ğŸ¦˜',
        'ğŸ¦¬',
        'ğŸƒ',
        'ğŸ‚',
        'ğŸ„',
        'ğŸ',
        'ğŸ–',
        'ğŸ',
        'ğŸ‘',
        'ğŸ¦™',
        'ğŸ',
        'ğŸ¦Œ',
        'ğŸ•',
        'ğŸ©',
        'ğŸ¦®',
        'ğŸ•â€ğŸ¦º',
      ],
    },
    {
      'icon': Icons.emoji_food_beverage,
      'title': 'é£Ÿç‰©ä¸é¥®æ–™',
      'emojis': [
        'ğŸ',
        'ğŸ',
        'ğŸ',
        'ğŸŠ',
        'ğŸ‹',
        'ğŸŒ',
        'ğŸ‰',
        'ğŸ‡',
        'ğŸ“',
        'ğŸ«',
        'ğŸˆ',
        'ğŸ’',
        'ğŸ‘',
        'ğŸ¥­',
        'ğŸ',
        'ğŸ¥¥',
        'ğŸ¥',
        'ğŸ…',
        'ğŸ†',
        'ğŸ¥‘',
        'ğŸ¥¦',
        'ğŸ¥¬',
        'ğŸ¥’',
        'ğŸŒ¶',
        'ğŸ«‘',
        'ğŸŒ½',
        'ğŸ¥•',
        'ğŸ«’',
        'ğŸ§„',
        'ğŸ§…',
        'ğŸ¥”',
        'ğŸ ',
        'ğŸ¥',
        'ğŸ¥–',
        'ğŸ',
        'ğŸ¥¨',
        'ğŸ¥¯',
        'ğŸ¥',
        'ğŸ§‡',
        'ğŸ§€',
        'ğŸ–',
        'ğŸ—',
        'ğŸ¥©',
        'ğŸ¥“',
        'ğŸ”',
        'ğŸŸ',
        'ğŸ•',
        'ğŸŒ­',
        'ğŸ¥ª',
        'ğŸŒ®',
        'ğŸŒ¯',
        'ğŸ«”',
        'ğŸ¥™',
        'ğŸ§†',
        'ğŸ¥š',
        'ğŸ³',
        'ğŸ¥˜',
        'ğŸ²',
        'ğŸ«•',
        'ğŸ¥£',
        'ğŸ¥—',
        'ğŸ¿',
        'ğŸ§ˆ',
        'ğŸ§‚',
        'ğŸ¥«',
        'ğŸ±',
        'ğŸ˜',
        'ğŸ™',
        'ğŸš',
        'ğŸ›',
        'ğŸœ',
        'ğŸ',
        'ğŸ ',
        'ğŸ¢',
        'ğŸ£',
        'ğŸ¤',
        'ğŸ¥',
        'ğŸ¥®',
        'ğŸ¡',
        'ğŸ¥Ÿ',
        'ğŸ¥ ',
        'ğŸ¥¡',
        'ğŸ¦€',
        'ğŸ¦',
        'ğŸ¦',
        'ğŸ¦‘',
        'ğŸ¦ª',
        'ğŸ¦',
        'ğŸ§',
        'ğŸ¨',
        'ğŸ©',
        'ğŸª',
        'ğŸ‚',
        'ğŸ°',
        'ğŸ§',
        'ğŸ¥§',
      ],
    },
    {
      'icon': Icons.sports_soccer,
      'title': 'æ´»åŠ¨',
      'emojis': [
        'âš½',
        'ğŸ€',
        'ğŸˆ',
        'âš¾',
        'ğŸ¥',
        'ğŸ¾',
        'ğŸ',
        'ğŸ‰',
        'ğŸ¥',
        'ğŸ±',
        'ğŸª€',
        'ğŸ“',
        'ğŸ¸',
        'ğŸ’',
        'ğŸ‘',
        'ğŸ¥',
        'ğŸ',
        'ğŸªƒ',
        'ğŸ¥…',
        'â›³',
        'ğŸª',
        'ğŸ¹',
        'ğŸ£',
        'ğŸ¤¿',
        'ğŸ¥Š',
        'ğŸ¥‹',
        'ğŸ½',
        'ğŸ›¹',
        'ğŸ›¼',
        'ğŸ›·',
        'â›¸',
        'ğŸ¥Œ',
        'ğŸ¿',
        'â›·',
        'ğŸ‚',
        'ğŸª‚',
        'ğŸ‹ï¸â€â™€ï¸',
        'ğŸ‹ï¸',
        'ğŸ‹ï¸â€â™‚ï¸',
        'ğŸ¤¼â€â™€ï¸',
        'ğŸ¤¼',
        'ğŸ¤¼â€â™‚ï¸',
        'ğŸ¤¸â€â™€ï¸',
        'ğŸ¤¸',
        'ğŸ¤¸â€â™‚ï¸',
        'â›¹ï¸â€â™€ï¸',
        'â›¹ï¸',
        'â›¹ï¸â€â™‚ï¸',
        'ğŸ¤º',
        'ğŸ¤¾â€â™€ï¸',
        'ğŸ¤¾',
        'ğŸ¤¾â€â™‚ï¸',
        'ğŸŒï¸â€â™€ï¸',
        'ğŸŒï¸',
        'ğŸŒï¸â€â™‚ï¸',
        'ğŸ‡',
        'ğŸ§˜â€â™€ï¸',
        'ğŸ§˜',
        'ğŸ§˜â€â™‚ï¸',
        'ğŸ„â€â™€ï¸',
        'ğŸ„',
        'ğŸ„â€â™‚ï¸',
        'ğŸŠâ€â™€ï¸',
        'ğŸŠ',
        'ğŸŠâ€â™‚ï¸',
        'ğŸ¤½â€â™€ï¸',
        'ğŸ¤½',
        'ğŸ¤½â€â™‚ï¸',
        'ğŸš£â€â™€ï¸',
        'ğŸš£',
        'ğŸš£â€â™‚ï¸',
        'ğŸ§—â€â™€ï¸',
        'ğŸ§—',
        'ğŸ§—â€â™‚ï¸',
        'ğŸšµâ€â™€ï¸',
        'ğŸšµ',
        'ğŸšµâ€â™‚ï¸',
        'ğŸš´â€â™€ï¸',
        'ğŸš´',
        'ğŸš´â€â™‚ï¸',
        'ğŸ†',
        'ğŸ¥‡',
        'ğŸ¥ˆ',
        'ğŸ¥‰',
        'ğŸ…',
        'ğŸ–',
        'ğŸµ',
        'ğŸ—',
        'ğŸ«',
        'ğŸŸ',
        'ğŸª',
        'ğŸ¤¹â€â™€ï¸',
        'ğŸ¤¹',
        'ğŸ¤¹â€â™‚ï¸',
        'ğŸ­',
        'ğŸ©°',
      ],
    },
    {
      'icon': Icons.emoji_objects,
      'title': 'ç‰©å“',
      'emojis': [
        'âŒš',
        'ğŸ“±',
        'ğŸ“²',
        'ğŸ’»',
        'âŒ¨ï¸',
        'ğŸ–¥',
        'ğŸ–¨',
        'ğŸ–±',
        'ğŸ–²',
        'ğŸ•¹',
        'ğŸ—œ',
        'ğŸ’½',
        'ğŸ’¾',
        'ğŸ’¿',
        'ğŸ“€',
        'ğŸ“¼',
        'ğŸ“·',
        'ğŸ“¸',
        'ğŸ“¹',
        'ğŸ¥',
        'ğŸ“½',
        'ğŸ',
        'ğŸ“',
        'â˜ï¸',
        'ğŸ“Ÿ',
        'ğŸ“ ',
        'ğŸ“º',
        'ğŸ“»',
        'ğŸ™',
        'ğŸš',
        'ğŸ›',
        'ğŸ§­',
        'â±',
        'â²',
        'â°',
        'ğŸ•°',
        'âŒ›',
        'â³',
        'ğŸ“¡',
        'ğŸ”‹',
        'ğŸ”Œ',
        'ğŸ’¡',
        'ğŸ”¦',
        'ğŸ•¯',
        'ğŸª”',
        'ğŸ§¯',
        'ğŸ›¢',
        'ğŸ’¸',
        'ğŸ’µ',
        'ğŸ’´',
        'ğŸ’¶',
        'ğŸ’·',
        'ğŸª™',
        'ğŸ’°',
        'ğŸ’³',
        'ğŸ’',
        'âš–ï¸',
        'ğŸªœ',
        'ğŸ§°',
        'ğŸª›',
        'ğŸ”§',
        'ğŸ”¨',
        'âš’',
        'ğŸ› ',
        'â›',
        'ğŸªš',
        'ğŸ”©',
        'âš™ï¸',
        'ğŸª¤',
        'ğŸ§±',
        'â›“',
        'ğŸ§²',
        'ğŸ”«',
        'ğŸ’£',
        'ğŸ§¨',
        'ğŸª“',
        'ğŸ”ª',
        'ğŸ—¡',
        'âš”ï¸',
        'ğŸ›¡',
        'ğŸš¬',
        'âš°ï¸',
        'ğŸª¦',
        'âš±ï¸',
        'ğŸº',
        'ğŸ”®',
        'ğŸ“¿',
        'ğŸ§¿',
        'ğŸ’ˆ',
        'âš—ï¸',
        'ğŸ”­',
        'ğŸ”¬',
        'ğŸ•³',
        'ğŸ©¹',
        'ğŸ©º',
        'ğŸ’Š',
      ],
    },
    {
      'icon': Icons.emoji_symbols,
      'title': 'ç¬¦å·',
      'emojis': [
        'â¤ï¸',
        'ğŸ§¡',
        'ğŸ’›',
        'ğŸ’š',
        'ğŸ’™',
        'ğŸ’œ',
        'ğŸ–¤',
        'ğŸ¤',
        'ğŸ¤',
        'ğŸ’”',
        'â£ï¸',
        'ğŸ’•',
        'ğŸ’',
        'ğŸ’“',
        'ğŸ’—',
        'ğŸ’–',
        'ğŸ’˜',
        'ğŸ’',
        'ğŸ’Ÿ',
        'â˜®ï¸',
        'âœï¸',
        'â˜ªï¸',
        'ğŸ•‰',
        'â˜¸ï¸',
        'âœ¡ï¸',
        'ğŸ”¯',
        'ğŸ•',
        'â˜¯ï¸',
        'â˜¦ï¸',
        'ğŸ›',
        'â›',
        'â™ˆ',
        'â™‰',
        'â™Š',
        'â™‹',
        'â™Œ',
        'â™',
        'â™',
        'â™',
        'â™',
        'â™‘',
        'â™’',
        'â™“',
        'ğŸ†”',
        'âš›ï¸',
        'ğŸ‰‘',
        'â˜¢ï¸',
        'â˜£ï¸',
        'ğŸ“´',
        'ğŸ“³',
        'ğŸˆ¶',
        'ğŸˆš',
        'ğŸˆ¸',
        'ğŸˆº',
        'ğŸˆ·ï¸',
        'âœ´ï¸',
        'ğŸ†š',
        'ğŸ’®',
        'ğŸ‰',
        'ãŠ™ï¸',
        'ãŠ—ï¸',
        'ğŸˆ´',
        'ğŸˆµ',
        'ğŸˆ¹',
        'ğŸˆ²',
        'ğŸ…°ï¸',
        'ğŸ…±ï¸',
        'ğŸ†',
        'ğŸ†‘',
        'ğŸ…¾ï¸',
        'ğŸ†˜',
        'âŒ',
        'â­•',
        'ğŸ›‘',
        'â›”',
        'ğŸ“›',
        'ğŸš«',
        'ğŸ’¯',
        'ğŸ’¢',
        'â™¨ï¸',
        'ğŸš·',
        'ğŸš¯',
        'ğŸš³',
        'ğŸš±',
        'ğŸ”',
        'ğŸ“µ',
        'ğŸš­',
        'â—',
        'â•',
        'â“',
        'â”',
        'â€¼ï¸',
        'â‰ï¸',
        'ğŸ”…',
        'ğŸ”†',
        'ã€½ï¸',
      ],
    },
  ];

  @override
  Widget build(BuildContext context) {
    return Container(
      color: Colors.white,
      child: Column(
        children: [
          // åˆ†ç±»å¯¼èˆª
          Container(
            height: 50,
            decoration: BoxDecoration(
              border: Border(bottom: BorderSide(color: Colors.grey[300]!)),
            ),
            child: Row(
              children: List.generate(_categories.length, (index) {
                final category = _categories[index];
                return Expanded(
                  child: InkWell(
                    onTap: () {
                      setState(() {
                        _selectedCategory = index;
                      });
                    },
                    child: Container(
                      decoration: BoxDecoration(
                        border: Border(
                          bottom: BorderSide(
                            color: _selectedCategory == index
                                ? Theme.of(context).primaryColor
                                : Colors.transparent,
                            width: 2,
                          ),
                        ),
                      ),
                      child: Icon(
                        category['icon'] as IconData,
                        color: _selectedCategory == index
                            ? Theme.of(context).primaryColor
                            : Colors.grey,
                      ),
                    ),
                  ),
                );
              }),
            ),
          ),
          // è¡¨æƒ…ç½‘æ ¼
          Expanded(
            child: GridView.count(
              crossAxisCount: 8,
              padding: const EdgeInsets.all(8),
              children:
                  (_categories[_selectedCategory]['emojis'] as List<String>)
                      .map(
                        (emoji) => InkWell(
                          onTap: () => widget.onEmojiSelected(emoji),
                          child: Center(
                            child: Text(
                              emoji,
                              style: const TextStyle(fontSize: 26),
                            ),
                          ),
                        ),
                      )
                      .toList(),
            ),
          ),
          // æœ€è¿‘ä½¿ç”¨ï¼ˆå¯é€‰åŠŸèƒ½ï¼‰
          Container(
            height: 40,
            padding: const EdgeInsets.symmetric(horizontal: 16),
            decoration: BoxDecoration(
              color: Colors.grey[100],
              border: Border(top: BorderSide(color: Colors.grey[300]!)),
            ),
            child: Row(
              children: [
                Icon(Icons.access_time, size: 16, color: Colors.grey[600]),
                const SizedBox(width: 8),
                Text(
                  'æœ€è¿‘ä½¿ç”¨',
                  style: TextStyle(fontSize: 12, color: Colors.grey[600]),
                ),
                const Spacer(),
                // å¯ä»¥åœ¨è¿™é‡Œæ·»åŠ æœ€è¿‘ä½¿ç”¨çš„è¡¨æƒ…
              ],
            ),
          ),
        ],
      ),
    );
  }
}
